---
title: "lab_3"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Note to self: 

1    county|               county identifier
2      year|                            1987
3    crmrte|     crimes committed per person
4    prbarr|         'probability' of arrest
5   prbconv|     'probability' of conviction
6   prbpris| 'probability' of prison sentence
7    avgsen|             avg. sentence, days
8     polpc|               police per capita
9   density|             people per sq. mile
10    taxpc|          tax revenue per capita
11     west|           =1 if in western N.C.
12  central|           =1 if in central N.C.
13    urban|                   =1 if in SMSA
14 pctmin80|            perc. minority, 1980
15     wcon|       weekly wage, construction
16     wtuc|    wkly wge, trns, util, commun
17     wtrd| wkly wge, whlesle, retail trade
18     wfir|    wkly wge, fin, ins, real est
19     wser|      wkly wge, service industry
20     wmfg|         wkly wge, manufacturing
21     wfed|         wkly wge, fed employees
22     wsta|       wkly wge, state employees
23     wloc|        wkly wge, local gov emps
24      mix| offense mix: face-to-face/other
25  pctymle|              percent young male

```{r pressure, echo=FALSE}
library(tidyverse)
library(effsize)
library(plyr)
library(reshape2)

setwd("C:\\Users\\winbase\\MIDS\\w203\\lab_3-master")
crime_data = read.csv("crime_v2.csv")

#clean data, dropping all NA rows
crime_data = crime_data[which(crime_data$county != 'NA'),]

#very initial looking for correlations
cor(crime_data$crmrte, crime_data$taxpc) #0.45, pretty strongly correlated
cor(crime_data$crmrte, crime_data$wmfg) #0.35, also pretty strongly correlated
cor(crime_data$crmrte, crime_data$prbarr) #-0.39, pretty neg strong

# what is wrong with prbconv?
class(crime_data$prbconv[1][1]) #r thinks it's a factor?

cleaned_convictions = as.numeric(levels(crime_data$prbconv)[as.integer(crime_data$prbconv)])
 #not sure if /2 is correct but a lot of these variables are greater than 1
cleaned_convictions = cleaned_convictions/2

#does crime rate go down when convictions are more likely?
crime_conviction = lm(crime_data$crmrte ~ cleaned_convictions)
plot(jitter(crime_data$crmrte), jitter(cleaned_convictions), xlab = "Crime Rate", ylab = "Probability of conviction")
abline(crime_conviction) #doesn/t seem to show much
summary(crime_conviction)

crime_tax = lm(crime_data$crmrte ~ crime_data$taxpc)
plot(jitter(crime_data$crmrte), jitter(crime_data$taxpc), xlab = "Crime Rate", ylab = "Tax receipts")
abline(crime_tax)
summary(crime_tax)

crime_arrest = lm(crime_data$crmrte ~ crime_data$prbarr)
plot(jitter(crime_data$crmrte), jitter(crime_data$prbarr), xlab = "Crime Rate", ylab = "Probability of Arrest")
abline(crime_arrest)
summary(crime_arrest)

crime_police = lm(crime_data$crmrte ~ crime_data$polpc)
plot(jitter(crime_data$crmrte), jitter(crime_data$polpc), xlab = "Crime Rate", ylab = "Police Presence")
abline(crime_police)
summary(crime_police)
```



Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.

```Test code from Ryan```
